<?xml version="1.0" encoding="utf-8"?>
<Patch>
    
    <Operation Class="PatchOperationAddModExtension">
        <xpath>Defs/FactionDef[@Name="TribeBase"]</xpath>
        <value>
            <li Class="rep.heframework.PawnGroupMakerExtensionHE">
                <alwaysUseHighestTier>true</alwaysUseHighestTier>
                <taggedPawnGroupMakers>
                    <li>
                        <!-- Vanilla mixed melee and ranged -->
                        <kindDef>Combat</kindDef>
                        <groupName>VanillaMixed</groupName>
                        <commonality>100</commonality>
                        <groupTier>1</groupTier>
                        <allowedRaidStrategies>
                            <li>ImmediateAttack</li>
                        </allowedRaidStrategies>
                        <allowedArrivalModes>
                            <li>EdgeWalkIn</li>
                            <li>EdgeWalkInGroups</li>
                        </allowedArrivalModes>
                        <options>
                            <Tribal_Penitent>5</Tribal_Penitent>
                            <Tribal_Warrior>5</Tribal_Warrior>
                            <Tribal_Archer>10</Tribal_Archer>
                            <Tribal_Hunter>10</Tribal_Hunter>
                            <Tribal_HeavyArcher>10</Tribal_HeavyArcher>
                            <Tribal_Berserker>5</Tribal_Berserker>
                            <Tribal_ChiefRanged>3</Tribal_ChiefRanged>
                            <Tribal_ChiefMelee>1.5</Tribal_ChiefMelee>
                        </options>
                    </li>
                    <li>
                        <!-- Vanilla ranged only -->
                        <kindDef>Combat</kindDef>
                        <groupName>VanillaRanged</groupName>
                        <commonality>60</commonality>
                        <groupTier>1</groupTier>
                        <allowedRaidStrategies>
                            <li>ImmediateAttack</li>
                        </allowedRaidStrategies>
                        <allowedArrivalModes>
                            <li>EdgeWalkIn</li>
                            <li>EdgeWalkInGroups</li>
                        </allowedArrivalModes>
                        <options>
                            <Tribal_Archer>10</Tribal_Archer>
                            <Tribal_Hunter>10</Tribal_Hunter>
                            <Tribal_HeavyArcher>10</Tribal_HeavyArcher>
                            <Tribal_ChiefRanged>5</Tribal_ChiefRanged>
                        </options>
                    </li>
                    <li>
                        <!-- Vanilla melee only -->
                        <kindDef>Combat</kindDef>
                        <groupName>VanillaMelee</groupName>
                        <commonality>60</commonality>
                        <groupTier>1</groupTier>
                        <allowedRaidStrategies>
                            <li>ImmediateAttack</li>
                        </allowedRaidStrategies>
                        <allowedArrivalModes>
                            <li>EdgeWalkIn</li>
                            <li>EdgeWalkInGroups</li>
                        </allowedArrivalModes>
                        <options>
                            <Tribal_Penitent>10</Tribal_Penitent>
                            <Tribal_Warrior>10</Tribal_Warrior>
                            <Tribal_Berserker>10</Tribal_Berserker>
                            <Tribal_ChiefMelee>5</Tribal_ChiefMelee>
                        </options>
                    </li>
                    <li>
                        <!-- Vanilla breachers -->
                        <kindDef>Combat</kindDef>
                        <groupName>VanillaBreachers</groupName>
                        <commonality>5</commonality>
                        <groupTier>1</groupTier>
                        <allowedRaidStrategies>
                            <li>ImmediateAttackBreaching</li>
                        </allowedRaidStrategies>
                        <allowedArrivalModes>
                            <li>EdgeWalkIn</li>
                            <li>EdgeWalkInGroups</li>
                        </allowedArrivalModes>
                        <options>
                            <Tribal_Breacher>5</Tribal_Breacher>
                            <Tribal_Penitent>5</Tribal_Penitent>
                            <Tribal_Warrior>5</Tribal_Warrior>
                            <Tribal_Archer>10</Tribal_Archer>
                            <Tribal_Hunter>10</Tribal_Hunter>
                            <Tribal_HeavyArcher>10</Tribal_HeavyArcher>
                            <Tribal_Berserker>5</Tribal_Berserker>
                            <Tribal_ChiefRanged>3</Tribal_ChiefRanged>
                            <Tribal_ChiefMelee>1.5</Tribal_ChiefMelee>
                        </options>
                    </li>
                    <li>
                        <!-- Tribal Coalition (Elites only) -->
                        <kindDef>Combat</kindDef>
                        <groupName>TribalCoalitionElites</groupName>
                        <commonality>100</commonality>
                        <groupTier>2</groupTier>
                        <allowedRaidStrategies>
                            <li>ImmediateAttack</li>
                            <li>ImmediateAttackBreaching</li>
                            <li>StageThenAttack</li>
                        </allowedRaidStrategies>
                        <allowedArrivalModes>
                            <li>EdgeWalkIn</li>
                            <li>EdgeWalkInGroups</li>
                        </allowedArrivalModes>
                        <options>
                            <Tribal_Breacher>5</Tribal_Breacher>
                            <Tribal_HeavyArcher>10</Tribal_HeavyArcher>
                            <Tribal_Berserker>10</Tribal_Berserker>
                            <Tribal_ChiefRanged>3</Tribal_ChiefRanged>
                            <Tribal_ChiefMelee>1.5</Tribal_ChiefMelee>
                        </options>
                        <requiredSiteTags>
                            <li>HE_Tribal_Elites</li>
                        </requiredSiteTags>
                    </li>
                    <li>
                        <!-- Tribal Drugged -->
                        <kindDef>Combat</kindDef>
                        <groupName>TribalDrugged</groupName>
                        <commonality>100</commonality>
                        <groupTier>2</groupTier>
                        <allowedRaidStrategies>
                            <li>ImmediateAttack</li>
                        </allowedRaidStrategies>
                        <allowedArrivalModes>
                            <li>EdgeWalkIn</li>
                            <li>EdgeWalkInGroups</li>
                        </allowedArrivalModes>
                        <options>
                            <Tribal_Breacher>5</Tribal_Breacher>
                            <Tribal_HeavyArcher>10</Tribal_HeavyArcher>
                            <Tribal_Berserker>10</Tribal_Berserker>
                            <Tribal_ChiefRanged>3</Tribal_ChiefRanged>
                            <Tribal_ChiefMelee>1.5</Tribal_ChiefMelee>
                        </options>
                        <requiredSiteTags>
                            <li>HE_Tribal_Drugs</li>
                        </requiredSiteTags>
                    </li>
                    <li>
                        <!-- Tribal Animals -->
                        <kindDef>Combat</kindDef>
                        <groupName>TribalAnimals</groupName>
                        <commonality>100</commonality>
                        <groupTier>2</groupTier>
                        <allowedRaidStrategies>
                            <li>ImmediateAttack</li>
                        </allowedRaidStrategies>
                        <allowedArrivalModes>
                            <li>EdgeWalkIn</li>
                            <li>EdgeWalkInGroups</li>
                        </allowedArrivalModes>
                        <options>
                            <Tribal_Penitent>5</Tribal_Penitent>
                            <Tribal_Warrior>5</Tribal_Warrior>
                            <Tribal_Archer>10</Tribal_Archer>
                            <Tribal_Hunter>10</Tribal_Hunter>
                            <Tribal_HeavyArcher>10</Tribal_HeavyArcher>
                            <Tribal_Berserker>5</Tribal_Berserker>
                            <Tribal_ChiefRanged>3</Tribal_ChiefRanged>
                            <Tribal_ChiefMelee>1.5</Tribal_ChiefMelee>
                            <Warg>10</Warg>
                            <Bear_Grizzly>5</Bear_Grizzly>
                            <WildBoar>15</WildBoar>
                        </options>
                        <requiredSiteTags>
                            <li>HE_Tribal_Animals</li>
                        </requiredSiteTags>
                    </li>
                </taggedPawnGroupMakers>
            </li>
        </value>
    </Operation>

    <!-- TODO rep.heframework.WorldObjectExtensionHE for tribal settlment-->
    <!-- TODO KCSG.CustomGenOption for tribal settlment-->
</Patch>